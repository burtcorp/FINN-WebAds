(function(a,b){"use strict";var c,d,e=7,f={RETRIES:5,TIMEOUT:50,MINSIZE:39,ADCONTAINER:"webAd"};d=function(a){function c(a,b){this.name=a,this.options=b!=null?b:{}}return c.prototype.remove=function(){return this.$wrapper.remove(),this},c.prototype.getUrl=function(a){var b=FINN.webAds.iframeUrl||"/finn/webads",c=b.indexOf("?")!==-1?"&":"?",d=a&&a.indexOf("refreshWebAd")===-1?"refreshWebAd=true&":"";return b+(c+"ver="+e+"&")+d+"#_"+this.name},c.prototype.makeIframe=function(){var c=a.createElement("div"),d=a.createElement("div"),e=a.createElement("iframe");d.className="webad-inner";var f=["webad","webad-"+this.name];return this.options.hidden&&(f.push("webad-hidden"),c.style.display="none"),this.options.sticky&&f.push("webad-sticky"),c.className=f.join(" ").toLowerCase(),e.src=this.getUrl(),e.scrolling="no",e.setAttribute("data-automation-id",this.name),e.className="webad-iframe",e.marginWidth=0,e.marginHeight=0,e.frameBorder="0",e.allowTransparency="true",e.width=this.options.width||100,e.height=this.options.height||100,e.style.width=(this.options.width||100)+"px",e.style.height=(this.options.height||100)+"px",e.style.border="0px",d.appendChild(e),c.appendChild(d),this.$iframe=b(e),this.$wrapper=b(c).data("webad",this.name),this},c}(document),c=function(){function a(a,b){this.params=a,this.exposeObj=b!==null?b:{},this.name=this.params.name,this.url=this.params.url,this.container=this.params.container,this.adContainer=this.params.adContainer||f.ADCONTAINER,this.minSize=this.params.minSize||f.MINSIZE,this.width=0,this.height=0,this.iframe=new d(this.name,this.params),this.active=!1,this.retries=f.RETRIES,this.timer=f.TIMEOUT,this.resolved=!1,this.failed=!1,this.incomplete=!1,this.resized=!1,this.notValid=!1,this.ignoreOnload=!1,this.log(1,"Banner init. (new Banner({}))")}return a.prototype.log=function(a,b){b||(b=a,a=1),this.params.log&&this.params.log(this,a,b)},a.prototype.config=function(a,b){return this.log(3,a+" updated"),this[a]=b},a.prototype.onload=function(){this.log(2,"onload triggered on iframe"),this.$webAd=this.iframe.$iframe.contents().find("#"+this.adContainer);if(this.ignoreOnload===!0)return this.resolve();if(this.params.hidden||this.params.skipSizeCheck){this.log(2,"HIDDEN ignoreSizeCheck");if(this.retries===f.RETRIES&&this.hasEmptyPixel())return this.fail("pixel");this.resolve()}else this.processSize();return FINN.webAds.resolveOnload(this.name),this},a.prototype.isValidSize=function(a,b){return a===null||a<=this.minSize||a===null||a<=this.minSize},a.prototype.isEmptyPixel=function(){return!!b(this).attr("src").match(/.*(1x1|3x3|1x2).*/i)},a.prototype.hasEmptyPixel=function(){return this.$webAd.find("img").filter(this.isEmptyPixel).length>0},a.prototype.processSize=function(){var a=this.$webAd.width(),b=this.$webAd.height();return this.log(2,"Checking if valid size: "+a+"x"+b),this.isValidSize(a,b)?this.retries===f.RETRIES&&this.hasEmptyPixel()?this.fail("pixel"):this.pollForNewSize(a,b):(this.resizeIfNotDefault(a,b),this.resolve(),this)},a.prototype.resolve=function(){return this.log(1," is resolved internally."),this.params.bodyClass&&!this.failed&&b("body").addClass(this.params.bodyClass),this.params.done&&typeof this.params.done=="function"&&this.params.done(this),this.resolved||(this.resolved=!0,this.log(2,"Calling FINN.webAds.resolve()"),FINN.webAds.resolve(this.name)),this.refreshCalled=!1,this},a.prototype.fail=function(a,c){return this.log(1,"Failed:"+a),!c&&this.iframe.$wrapper&&this.iframe.$wrapper.addClass("webad-failed"),this.params.bodyFailClass&&b("body").addClass(this.params.bodyFailClass),this.failed=!0,this.resolve()},a.prototype.pollForNewSize=function(a,b){var c,d;return this.log(2,"pollForNewSize "+this.timer+" retries: "+this.retries),this.timer+=this.timer,this.retries-=1,c=this,this.retries>0?(d=function(){c.processSize()},setTimeout(d,this.timer)):(this.width=a,this.height=b,this.fail("timeout")),this},a.prototype.isDefaultSize=function(a,b){if(this.resized)return!1;if(this.params.width>0&&this.params.width===a&&this.params.height===b)return!0},a.prototype.resizeIfNotDefault=function(a,b){return this.width=a,this.height=b,this.isDefaultSize(a,b)||this.resize(),this},a.prototype.resize=function(a,b){return typeof a!="undefined"&&(this.width=a),typeof b!="undefined"&&(this.height=b),this.iframe.$iframe.css({height:this.height,width:this.width}).attr("height",this.height).attr("width",this.width),this.resized=!0,this.log(1,"resized to height:"+this.height+" and width:"+this.width),this},a.prototype.expose=function(){return b.extend({},this.exposeObj,{banner:this})},a.prototype.injectScript=function(a,b){return this.log(3,"injectScript"),this.doc=a,a.write('<script type="text/javascript" src="'+this.url+'"></scr'+"ipt>"),this},a.prototype.refresh=function(){this.incomplete&&this.fail("Cant refresh bacause of not valid config."),this.refreshCalled=!0,this.resolved=!1,this.failed&&this.iframe&&this.iframe.$wrapper&&this.iframe.$wrapper.removeClass("webad-failed"),this.failed=!1,this.retries=f.RETRIES,this.timer=f.TIMEOUT;if(this.doc){var a=this.iframe.getUrl(this.doc.location.href);this.doc.location.replace(a)}return this},a.prototype.remove=function(){return this.active=!1,this.resolved=!1,this.iframe.remove(),this},a.prototype.isValid=function(){return this.log(2,"Not valid if "+this.params.threshold+" is less than "+this.params.windowWidth),typeof this.params.threshold!="undefined"&&this.params.windowWidth<=this.params.threshold?!1:!0},a.prototype.getClassName=function(){return"webad-"+this.name.toLowerCase()},a.prototype.insert=function(){this.log(3,"Insert()");if(!this.isValid())return this.notValid=!0,this.fail("notValid"),this;if(!this.container)return this.incomplete=!0,this.failed=!0,this.log(1,"Missing container "+this.container),this.resolve(),this;if(this.active&&this.$webAd&&b("."+this.getClassName()).length>0)return this.log(1,"iframe present in page"),this;this.incomplete=!1,this.resolved=!1,this.active=!0;var a=typeof this.container=="string"?jQuery("#"+this.container):this.container;return a.size()<=0?(this.fail("Missing valid container on "+this.name,!0),this):(this.log(3,"Inserting iframe/banner"),this.iframe.makeIframe(),a.data("webads-processed","processed"),this.iframe.$wrapper.appendTo(a),this)},a.prototype.getBannerFlag=function(a){return FINN.webAds.getBannerFlag(a)},a.prototype.setBannerFlag=function(a,b){return FINN.webAds.setBannerFlag(a,b)},a.prototype.plugin=function(a){var b=FINN.webAds.getPlugin(a);if(!b)return b;var c=Array.prototype.slice.call(arguments,1);return b.apply(this,c)},a}(),FINN.Banner=c}).call(this,FINN,jQuery);var FINN=FINN||{};(function(a,b){function c(a){a.log(2,"cb fixTopPosition");if(a.failed===!0)return;var c=a.width,d=c<=768,e=c>=800&&c<992,f=c>992;a.params.bodyFailClass&&b("body").removeClass(a.params.bodyFailClass),d||e?a.iframe.$wrapper.css("width","980px"):f&&a.iframe.$wrapper.css("margin-left","-12px")}function d(a){a.log(2,"cb fixLeftBanner"),!a.failed&&a.width>50&&a.iframe.$wrapper.css("left",-(a.width+12)+"px")}function e(a){a.log(2,"cb fixWallpaper");if(a.failed===!0)return;var c=a.iframe.$iframe.contents().find("img");if(c.size()>0&&c.width()!==1){var d=c.attr("src");if(d!==""&&d.indexOf("empty.gif")===-1){var e={background:' transparent url("'+d+'") 50% 0% no-repeat',"background-attachment":"fixed"};b("body").css(e).addClass("has-dominant-wallpaper")}}}function f(a){a.iframe.$wrapper.append("<button class=dismiss-sticky>X</button>"),a.iframe.$wrapper.on("click",".dismiss-sticky",function(){a.iframe.$wrapper.remove()})}"use strict",FINN.webAds=FINN.webAds||{},FINN.data=FINN.data||{},FINN.webAds.extend=function(a){typeof FINN.data.defaultConfig=="undefined"?FINN.data.defaultConfig=a:b.each(a,function(a,c){FINN.data.defaultConfig[a]=b.extend(FINN.data.defaultConfig[a]||{},c)})},FINN.webAds.extend({Top:{"extends":"normal",width:992,threshold:600,height:150,bodyFailClass:"top-position-collapsed",done:c},Left1:{"extends":"normal",width:240,threshold:1050,height:500,bodyClass:"has-dominant-campaign",done:d},Right1:{"extends":"normal",width:240,threshold:1025},Right2:{"extends":"normal",threshold:1025,sticky:!0,width:240,height:500},Right3:{threshold:1025,"extends":"normal",width:240},Middle:{"extends":"normal",width:580,height:400,threshold:291,container:"banners-middle"},Wallpaper:{"extends":"normal",hidden:!0,threshold:1050,done:e},Survey:{"extends":"normal",hidden:!0,done:b.noop},Txt_1:{"extends":"textads"},Txt_2:{"extends":"textads"},Txt_3:{"extends":"textads"},Txt_4:{"extends":"textads"},Txt_5:{"extends":"textads"},Txt_6:{"extends":"textads"},Txt_7:{"extends":"textads"},Txt_8:{"extends":"textads"},Txt_9:{"extends":"textads"},Txt_10:{"extends":"textads"},BottomLeft:{"extends":"bottomads"},BottomMiddle:{"extends":"bottomads"},BottomRight:{"extends":"bottomads"},BottomRight2:{"extends":"bottomads"},bottomads:{container:"banners-bottom"},textads:{width:100,height:46,container:"textbanners"},mobilebottom:{width:320,"extends":"normal",done:f},normal:{container:"banners"},all:{backend:"helios"}})})(FINN,jQuery);var FINN=FINN||{};(function(a,b){function e(a,b,d){var e=c,f=[],g=!0,h=0,i,j=0;for(var k=a.length,l=k-1;k>0;k--,l--)i=a[l],i.width>j&&(j=i.width),g&&i.height+e+c*f.length<=b?(f.push(i),e+=i.height+c):(g=!1,h+=i.height+c);var m=c;for(k=f.length,l=k-1;k>0;k--,l--)i=f[l],i.stickyPos=m+0,m+=i.height+c;return{alwaysSticky:f.length>0&&f.length===a.length,fold:h,sticky:f,maxWidth:j}}function g(a){if(f)return!0;f=!0,b.each(a,function(){this.log("activating sticky"),this.iframe.$wrapper.css({position:"fixed",top:this.stickyPos+"px"})})}function h(a){if(!f)return!0;f=!1,b.each(a,function(){this.log("de-activating sticky"),this.iframe.$wrapper.css({position:"static",top:""})})}a.webAds=a.webAds||{};var c=10,d=15,f=!1;a.webAds.sticky=function(c,f){function n(){var a=l.scrollTop();a>=m.fold?g(m.sticky):h(m.sticky)}var i=b("#"+c);if(i.size()===0)return!1;var j=i.find(".webad");if(j.size()===0)return!1;var k=j.map(function(c){return a.webAds._getBanner(b(this).data("webad"))}),l=b(window),m=e(k,l.height());if(f){var o=b(f).outerWidth()+12+10+m.maxWidth,p=l.width()<=o;if(p)return!1}if(m.alwaysSticky)n();else if(m.sticky.length>0){var q;n(),l.bind("scroll",function(){clearInterval(q),q=setTimeout(n,d)})}}})(FINN,jQuery);var FINN=FINN||{};(function(a,b){function h(a,c){return b(document).on(a,c)}function i(a,c){return b(document).one(a,c)}function j(a,c){b(document).trigger(a.toLowerCase(),c)}function k(){}function l(){}function s(){n={},o={},p={},q={},r={}}function t(a){return n[a]}function u(a){return o[a]||null}function v(a,b){return a?o[a]=b:null}function w(){var a=0;for(var b in n)a++;return a}function x(a,b,c){q[a]=q[a]||{},q[a][b]=c,n[a]&&n[a].config(b,c)}function y(a){for(var b in a)n[b]?n[b].url=a[b]:M({name:b,url:a[b]})}function z(a,c,d){var e=typeof a=="function";d=e?c:d,c=e?a:c,a=e?"/heliosAds":a||"/heliosAds",b.getJSON(a,function(a){typeof d=="undefined"&&M(a.webAds),c&&typeof c=="function"&&c(null,a.webAds)},function(a){c&&typeof c=="function"&&c(a,null)})}function B(a){var c=d[a.name]&&d[a.name]["extends"],f=c?d[c]:null;return b.extend({windowWidth:A},e,f,d.all,d[a.name],q[a.name],a)}function C(){var b=B(this),c=new a.Banner(b,m);return n[this.name]=c}function D(a,c,d){d=d||p,typeof c=="function"&&(d[a]&&b.isArray(d[a])?d[a].push(c):d[a]=[c])}function E(a,b,c){var d=typeof b=="function";c=d?c:b,b=d?b:c;var e=n[a];if(!!e)return!c&&e.active?(e.log(1,"banner is active"),b&&typeof b=="function"&&(e.resolved?(e.log(2,"is resolved, calling callback direct"),b(null,e)):(e.log(2,"deferring callback"),D(a,b))),e):(e.insert(),D(a,b),e);var f=new Error("Banner "+a+" not queued");b&&typeof b=="function"?b(f,null):G(a,f)}function F(a){a=a||"body",b(a).find("div[data-webad-position]").each(function(){var a=b(this);a.data("webads")&&a.data("webads")!=="lazy"&&x(a.data("webad-position"),"container",a)})}function G(a,c){r[a]&&r[a].length>0&&(b.each(r[a],function(){typeof this=="function"&&(c?this(c,null):this(null,n[a]))}),r[a]=null)}function H(a){G(a),p[a]&&p[a].length>0&&(b.each(p[a],function(){typeof this=="function"&&this(null,n[a])}),p[a]=null),j("webad-resolved-"+a,n[a]),j("webad-resolved",n[a]),I()}function I(){var a=!0,c;for(var d in n){c=n[d];if(c.resolved!==!0&&c.incomplete!==!0){a=!1;break}}if(a){var e=p.all;return p.all=null,e&&e.length>0&&b.each(e,function(){typeof this=="function"&&this(null,n)}),j("all-webads-resolved",n),!0}return!1}function J(){var a;for(var b in n)a=n[b],a.active===!1&&a.insert()}function K(a,b){function e(a){var b;d.length<=0?J():(b=d.shift(),D(b,e,r),E(b))}var c=a&&typeof a=="function";b=c?a:b,a=c?"Top":a||"Top";var d=a.split(",");b&&typeof b=="function"&&D("all",b),e()}function L(a,c){b(a).find('div[data-webads="lazy"]').attr("data-webads","true").data("webads","true"),c&&typeof c=="function"&&D("all",c),R(a,!0)}function M(a){if(!b.isArray(a))return C.call(a);b.each(a,C)}function N(a,b){n[a].refresh(),b&&typeof b=="function"&&D(a,b)}function O(a,c){function f(a){var c=!0;return b.each(e,function(){if(this===a)return c=!1}),c}function g(){if(d.length<=0)for(var a in n)f(a)&&N(a);else{var b=d.shift();if(!n[b])return g();e.push(b),N(b,g)}}a=a&&typeof a=="function"?"Top":a||"Top",c=a&&typeof a=="function"?a:c;var d=a.split(","),e=[];c&&typeof c=="function"&&D("all",c),g()}function P(a){return n[a]&&n[a].remove()}function Q(){for(var a in n)n[a]&&n[a].remove()}function R(a,c){F(a),b(a).find("div[data-webads='true']").filter(function(){return c===!0?!0:b(this).data("webads-processed")!=="processed"}).each(function(){var a=b(this);a.data("webads-processed","processed");var d=a.data("webad-position"),e=a.attr("id");d?E(d,c):e&&S(e,c)})}function S(a,b){for(var c in n)a===n[c].container&&E(c,b)}function T(a,c){var d=a.location.hash.substring(2),e=n[d].expose();b.each(e,function(a){c[a]=this})}var c=a.data=a.data||{},d=c.defaultConfig=c.defaultConfig||{},e=FINN.webAds&&FINN.webAds.logger&&FINN.webAds.logger();a.webAds=a.webAds||{};var f=a.webAds;f.renderContext=R,f.queue=M,f.render=E,f.renderAll=K,f.renderLazy=L,f.expose=T,f.refresh=N,f.refreshAll=O,f.updateUrls=y,f.resolve=H,f.resolveOnload=G,f.collectDataPositions=F,f.config=x,f.getFromServer=z,f.cleanUp=s,f.base="/",f.getBannerFlag=u,f.setBannerFlag=v,f._length=w,f._getBanner=t;var g={};f.on=h,f.one=i;var m={_jQuery:jQuery,inDapIf:!0,inFIF:undefined,webAds:f,helios_parameters:"",tf_recordClickToUrl:window.tf_recordClickToUrl},n={},o={},p={},q={},r={},A=b(window).width()})(FINN,jQuery);var FINN=FINN||{};(function(a,b){"use strict",a.webAds=a.webAds||{};var c={};a.webAds.registerPlugin=function(a,d){var e={};e.run=d.run||b.noop,typeof d.init=="function"&&d.init(e),c[a]=e},a.webAds.getPlugin=function(a){return c[a].run||null},a.webAds.registerPlugin("survey",{run:function(){this.plugin("overlay",{url:"http://www.finn.no",title:"Survey"})}}),a.webAds.registerPlugin("contextData",{init:function(){},run:function(){return FINN.data.banner}}),a.webAds.registerPlugin("overlay",{init:function(a){},run:function(a,c){var d=a.width,e=a.height,f=b("<iframe />",{"class":"iframe",src:a.url,style:"z-index:999999;position:fixed;width:50%;height:50%;left:30%;top:20%;background:red;"}).html("<h1>"+a.title+"</h1>");b("body").append(f),f.on("click",function(a){a.stopPropagation()}),b(window).on("keydown.overlay",function(a){a.which===27&&(f.remove(),b(window).off("keydown.overlay"))}),b("body").one("click",function(){f.remove()}),f.focus()}})})(FINN,jQuery)